name: Versioning Workflow

on:
  push:
    branches:
      - development

jobs:
  version:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install Dependencies
      run: npm install

    - name: Determine Version
      run: |
        # Implementa aquí la lógica para determinar el tipo de versión a incrementar
        # Puedes basarte en los mensajes de commit, por ejemplo

        # Lógica de ejemplo:
        if git log --format=%B -n 1 HEAD | grep -q 'fix'; then
          npm version patch -m "Bump version to %s"
        elif git log --format=%B -n 1 HEAD | grep -q 'feature'; then
          npm version minor -m "Bump version to %s"
        elif git log --format=%B -n 1 HEAD | grep -q 'breaking change'; then
          npm version major -m "Bump version to %s"
        else
          npm version patch -m "Bump version to %s"
        fi

    - name: Push Changes and Tags
      run: |
        git push origin development
        git push --tags

